.page-header
  %h1= "#{@convention.name} Settings"

.page-header
  %h2 Periods

.row-fluid
  %div.span3
    %h3 Planning
    - debug @convention.planning_period

  %div.span3
    %h3 Production

  %div.span3
    %h3 Open

  %div.span3
    %h3 Wrap-up

%ul.unstyled
  - @convention.periods.each do |period|
    %li
      = period.name
      = render :partial=>'time_spans/inline', :locals=>{:time_span => period.time_span, :text_only => true}
      = link_to edit_link_text, edit_convention_period_path(@convention, period)
      = link_to delete_link_text, [@convention, period], :method => :delete, :confirm => "Are you sure you want to delete #{period.name}?"
= link_to "Create new period", new_convention_period_path(@convention), :class=>'btn'

.page-header
  %h2 Convention Authorizations
%p= t("convention_authorization.description")
%p= t("formtastic.hints.auth_requirement.requirement")

- @convention.auth_requirements.sort_by(&:created_at).group_by(&:model).each do |model, ars|
  %table.table(class='auth_requirements')
    %thead
      %tr
        %th(width="200px")= "#{model.capitalize} Actions"
        %th(width="*") Authorized Roles
        %th(width="200px")
    %tbody
      - ars.sort_by(&:created_at).each do |ar|
        %tr
          %td= ar.action
          %td= best_in_place [@convention, ar], :requirement, :nil => t("no_requirement_set")
          %td= link_to edit_link_text("edit"), edit_convention_auth_requirement_path(@convention,ar)
